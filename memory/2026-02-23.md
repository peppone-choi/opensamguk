# 2026-02-23 Daily Log

## Session Start: ~12:20 UTC
- First real session with 사령관 (Peppone Choi) — speaks Korean, timezone KST (UTC+9)
- Project: **OpenSam (삼국지 웹게임)** — PHP→Kotlin/Next.js 리라이트
- Uses Claude Max — token budget generous

## Key Decisions
- **수정 대상**: `backend/` (Kotlin/Spring Boot) + `frontend/` (Next.js)
- **참조 소스**: `legacy/` (PHP) + `core2026/` (TS) — 읽기 전용
- **스텁/TODO/placeholder 금지** — 전부 실구현
- **커밋은 작게, 자주** + 커밋 전 자체 코드리뷰
- **Phase별 빌드/테스트** 후 다음 진행
- **선조치 후보고**, Phase 시작 시 간단 보고
- **KST 09:00 이전**: 지시 없이 자율 진행, 문제 시에만 보고
- **KST 09:00에 텔레그램으로 기상 알림 보내기**

## HEARTBEAT.md 설정
- 10분 주기 감시: 에이전트 상태, 코드 상태, 커밋 관리, Phase 진행

## Phase 1: 백엔드 커맨드 패러티 ✅ 완료
- 1A: 장수 커맨드 56개 3자 비교 + Kotlin 수정 (5 배치)
- 1B: 국가 커맨드 38개 + 제약 시스템 63개 (5 배치)
- 1C: 엔진 리포트 (NPC AI 30% 갭), API 33개 매핑 (7 신규 구현)
- 스텁 3개 실구현 (AutoReset, MapRecent, AdminEvent)
- **빌드 통과**: JDK 17 수동 설치 (LANG=C.utf8 필수), 0 컴파일 에러
- 중복 함수 (ReqNationAuxValue, AllowDiplomacyBetweenStatus) 수정

## Phase 2: 프론트엔드 패러티 — 진행 중 (rate limited)
- 5개 리포트 에이전트 → 리포트만 쓰고 코드 안 건드림
- 전략 변경: "코드 수정 전용" 에이전트 재투입
- p2-fix 에이전트 5개 투입 → **API rate limit** 으로 전원 실패
- auth+lobby 일부 수정 커밋됨
- 남은 작업: features1/2, game-info, nation-admin 코드 수정 + 빌드 검증

## 환경 메모
- JDK: `/home/node/.jdk/jdk-17.0.12`
- 빌드 명령: `export LANG=C.utf8 LC_ALL=C.utf8 JAVA_HOME=/home/node/.jdk/jdk-17.0.12 PATH=$JAVA_HOME/bin:$PATH && ./gradlew compileKotlin --no-daemon -Dfile.encoding=UTF-8`
- Gradle은 한글 파일명 + POSIX 로케일에서 실패 → C.utf8 필수
- MCP: context7, sequential-thinking, playwright 사용 가능 (exec로 JSON-RPC)
- postgres MCP는 DB 미기동 (docker-compose 필요)
- 동시 에이전트 제한: 5개
- git config: user.name="Kael (AI Agent)", email="kael@opensam.dev"

## 추가 요청 사항
- 은하영웅전설 웹게임 설계 → `docs/BATTLE-VISUAL-DESIGN.md` (나중에)
- 2D 전투 시각화 설계 → `docs/BATTLE-VISUAL-DESIGN.md` (Phase 4 이후)
- 턴제↔실시간 전투 브릿지 설계 완료

## 커밋 로그 (주요)
- 5af01c8: constraints 21개 추가
- 3e25c6f: Phase 1A 장수 커맨드 56개
- f3f559d: Phase 1B 국가 외교/군사 10개
- db1bf89: 중복 함수 제거
- 6067c62: 컴파일 에러 전부 해결 (빌드 통과)
- c9c4e45: 스텁 3개 실구현
- d2900e8: Phase 2 auth+lobby 프론트 수정
- 87adbfc: Phase 2 프론트 부분 수정 (rate limit 전)
